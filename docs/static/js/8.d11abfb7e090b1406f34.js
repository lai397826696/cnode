webpackJsonp([8],{451:function(t,e,a){function n(t){a(503)}var i=a(53)(a(475),a(516),n,null,null);t.exports=i.exports},462:function(t,e,a){"use strict";var n={methods:{tagType:function(t,e,a){return{ask:"问答",share:"分享",job:"招聘",good:"精华",dev:"dev"}[t]},getTime:function(t){var e=new Date(t),a=(new Date-e)/1e3;return a<60?Math.floor(a)+"秒前":a/60<60?Math.floor(a/60)+"分钟前":a/3600<24?Math.floor(a/3600)+"小时前":a/3600/24<30?Math.floor(a/3600/24)+"天前":a/3600/24/30<12?Math.floor(a/3600/24/30)+"个月前":Math.floor(a/3600/24/30/12)+"年前"},dateFormat:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(!t)return t;for(var e=["January","February","March","April","May","June","July","August","September","October","November","December"],a=new Date(t).toString().split(" "),n=void 0,i=0;i<e.length;i++)if(0==e[i].toLocaleLowerCase().indexOf(a[1].toLocaleLowerCase())){n=i<9?"0"+(i+1):i+1;break}return a[3]+"/"+n+"/"+a[2]}}};e.a=n},475:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(120),i=a.n(n),s=a(462),o=a(63);e.default={name:"details",data:function(){return{collect:"收藏",detaildata:{author:{},replies:[]},id:"",hfData:{id:"",content:""},scrollBottom:0}},mixins:[s.a],beforeRouteEnter:function(t,e,a){a(function(e){e.$loading(),e.id=t.params.id,e.$http({url:"/topic/"+e.id,params:{accesstoken:e.$store.state.userToken}}).then(function(t){e.$loading.close(),e.detaildata=t.data.data})})},beforeRouteLeave:function(t,e,a){this.detaildata={author:{},replies:[]},a()},computed:i()({},a.i(o.b)(["userToken","isLogin","userName"]),{reply_id:function(){return""==this.hfData.content&&(this.hfData.id=""),this.hfData.id}}),methods:{collectfn:function(){this.detaildata.is_collect?this.de_collect():this.ad_collects()},ad_collects:function(){var t=this,e=this;this.$http.post("/topic_collect/collect",{accesstoken:e.userToken,topic_id:e.id}).then(function(a){t.detaildata.is_collect=!0,e.collect="取消收藏"})},de_collect:function(){var t=this,e=this;this.$http.post("/topic_collect/de_collect",{accesstoken:e.userToken,topic_id:e.id}).then(function(a){t.detaildata.is_collect=!1,e.collect="收藏"})},reply:function(t,e){if(!this.isLogin)return this.$alert("登录后才能评论"),!1;this.hfData.id=t,this.hfData.content="@"+e+" "+this.hfData.content},huifufn:function(){var t=this;if(!this.isLogin)return this.$alert("登录后才能评论"),!1;if(!this.hfData.content)return this.$alert("回复内容不能为空"),!1;var e={accesstoken:t.userToken,content:t.hfData.content+"\r -–来自白白的 vue-cnode 1.0"};this.reply_id&&(e.reply_id=this.reply_id),console.log(e),this.hfData.content="",this.$http.post("/topic/"+t.id+"/replies",e).then(function(e){e.data.success&&t.$http({url:"/topic/"+t.id,params:{accesstoken:t.userToken}}).then(function(e){t.detaildata=e.data.data,t.hfData.content="",t.scrollfn()})})},zanfn:function(t){var e=this,a=this;if(this.isLoginfn()){if(t.author.loginname==this.userName)return this.$alert("不能帮自己点赞"),!1;this.$http.post("/reply/"+t.id+"/ups",{accesstoken:a.userToken}).then(function(e){"down"==e.data.action?(t.is_uped=!1,t.ups.splice(t.ups.indexOf(a.detaildata.author_id),1)):(t.is_uped=!0,t.ups.push(t.id))}).catch(function(t){e.$alert("发送错误")})}},isLoginfn:function(){return!!this.isLogin||(this.$alert("登录后才可以点赞"),!1)},scrollfn:function(){var t=this.$parent.$refs.appBody;console.log(t.scrollTop),t.scrollTop>0&&(t.scrollTop=this.$el.offsetHeight-t.offsetHeight)},editfn:function(){console.log(this.detaildata.content.replace(/<.*?>/gi,"")),this.$router.push({name:"topic",query:{id:this.detaildata.id,title:this.detaildata.title,tab:this.detaildata.tab,content:this.detaildata.content.replace(/<.*?>/gi,"")}})}},watch:{hfData:function(){}}}},491:function(t,e,a){e=t.exports=a(448)(!1),e.push([t.i,".detailsPage {\n  margin-bottom: .613333rem;\n  padding-top: .133333rem;\n  padding-bottom: .133333rem;\n  background-color: #fafafa;\n  background-color: #fff;\n}\n\n.detailsPage .hd .tips {\n  overflow: hidden;\n}\n\n.detailsPage .hd .tag {\n  float: left;\n  margin-right: 0.066667rem;\n}\n\n.detailsPage .hd .lastime {\n  float: right;\n  color: #878787;\n}\n\n.detailsPage .hd h2 {\n  padding: .066667rem 0 .133333rem;\n  color: #324057;\n  font-size: .213333rem;\n  line-height: .32rem;\n  word-break: break-all;\n}\n\n.detailsPage .authorBox {\n  margin: .133333rem 0;\n  font-size: .186667rem;\n}\n\n.detailsPage .authorBox .img_author {\n  display: block;\n  margin-right: .133333rem;\n  width: .6rem;\n  height: .6rem;\n  border-radius: 50%;\n}\n\n.detailsPage .authorBox .creatTime {\n  color: #80bd01;\n}\n\n.detailsPage .authorBox .text {\n  padding: 0.013333rem 0;\n}\n\n.detailsPage .authorBox .flexalign {\n  height: .6rem;\n}\n\n.detailsPage .authorBox .collection {\n  padding: .026667rem .066667rem;\n  color: #80bd01;\n  cursor: pointer;\n}\n\n.detailsPage .authorBox .edit {\n  padding: .026667rem .066667rem .026667rem 0;\n  cursor: pointer;\n}\n\n.detailsPage .detailCon {\n  margin-top: .133333rem;\n  margin-bottom: .2rem;\n  line-height: 1.6;\n  font-size: .186667rem;\n}\n\n.detailsPage .detailCon h1,\n.detailsPage .detailCon h2,\n.detailsPage .detailCon h3 {\n  border-bottom: 0.013333rem dotted #ccc;\n}\n\n.detailsPage .tag-lou {\n  margin-right: .066667rem;\n  color: #fff;\n  background-color: #6b727d;\n}\n\n.detailsPage .replyBox .replyNum {\n  padding: .133333rem 0;\n  font-size: .213333rem;\n}\n\n.detailsPage .replyBox .item {\n  margin-bottom: .173333rem;\n  margin-bottom: .133333rem;\n  margin: .066667rem 0;\n  padding: .093333rem 0;\n  border-radius: 0.04rem;\n  background-color: #fff;\n}\n\n.detailsPage .replyBox .item .img_author {\n  display: block;\n  margin-right: .133333rem;\n  width: .533333rem;\n  height: .533333rem;\n  border-radius: 50%;\n}\n\n.detailsPage .replyBox .item .flexalign {\n  height: .533333rem;\n}\n\n.detailsPage .replyBox .item .zan {\n  margin-right: .08rem;\n  padding: .066667rem 0;\n  font-size: .186667rem;\n}\n\n.detailsPage .replyBox .item .zan.active .font-icon {\n  color: #80bd01;\n}\n\n.detailsPage .replyBox .item .reply {\n  padding: .066667rem .026667rem;\n  font-size: .213333rem;\n}\n\n.detailsPage .replyBox .item .floor {\n  margin-right: .133333rem;\n  color: #19d431;\n}\n\n.detailsPage .replyBox .item .replyCon {\n  padding: .093333rem .066667rem 0;\n}\n\n.detailsPage .huifu {\n  position: fixed;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  z-index: 10;\n  margin: 0 auto;\n  max-width: 8.533333rem;\n  padding: .08rem 0;\n  font-size: 0;\n  background-color: #474a4f;\n}\n\n.detailsPage .huifu .textBox {\n  margin-left: 0.066667rem;\n}\n\n.detailsPage .huifu .text_hf {\n  display: block;\n  padding: 0 .093333rem;\n  width: 100%;\n  height: .453333rem;\n  line-height: .453333rem;\n  font-size: .213333rem;\n  border-radius: 0.04rem;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n}\n\n.detailsPage .huifu .btn_hf {\n  padding: 0 .133333rem;\n  font-size: .186667rem;\n  color: #fff;\n  background: none;\n  text-align: center;\n  cursor: pointer;\n}",""])},503:function(t,e,a){var n=a(491);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a(449)("57218678",n,!0,{})},516:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("article",{staticClass:"detailsPage pd10"},[a("header",{staticClass:"line-b hd"},[a("p",{staticClass:"tips"},[t.detaildata.top?a("span",{staticClass:"tag tag-top"},[t._v("置顶")]):t._e(),t._v(" "),t.detaildata.good?a("span",{staticClass:"tag tag-good"},[t._v("精华")]):t._e(),t._v(" "),a("span",{staticClass:"lastime"},[t._v("最后回复时间："+t._s(t.getTime(t.detaildata.last_reply_at)))])]),t._v(" "),a("h2",[t._v(t._s(t.detaildata.title))])]),t._v(" "),a("section",{staticClass:"flex authorBox"},[a("div",{staticClass:"flex_hd"},[a("router-link",{attrs:{to:"/user/"+t.detaildata.author.loginname}},[a("img",{staticClass:"img_author",attrs:{src:t.detaildata.author.avatar_url}})])],1),t._v(" "),a("div",{staticClass:"flex_bd"},[a("div",{staticClass:"flex flexalign"},[a("p",{staticClass:"text"},[a("span",{staticClass:"tag tag-lou"},[t._v("作者")]),t._v(t._s(t.detaildata.author.loginname))]),t._v(" "),a("div",{staticClass:"tips"},[a("span",{staticClass:"creatTime"},[t._v(t._s(t.getTime(t.detaildata.create_at)))]),t._v(" ·\n\t\t\t\t\t"),a("i",{staticClass:"font-icon icon-eye"}),t._v(" "+t._s(t.detaildata.visit_count)+"\n\t\t\t\t")])])]),t._v(" "),t.userToken?a("div",{staticClass:"flex_ft"},[a("span",{staticClass:"collection",on:{click:t.collectfn}},[a("i",{staticClass:"font-icon",class:[t.detaildata.is_collect?"icon-heart":"icon-heart-empty"]})])]):t._e()]),t._v(" "),a("section",{staticClass:"detailCon",domProps:{innerHTML:t._s(t.detaildata.content)}}),t._v(" "),a("div",{staticClass:"replyBox"},[a("div",{staticClass:"line-b replyNum"},[t._v(t._s(t.detaildata.replies.length+"条回复"))]),t._v(" "),0!=t.detaildata.replies.length?a("div",{staticClass:"con"},t._l(t.detaildata.replies,function(e,n){return a("article",{key:e.id,staticClass:"line-b item"},[a("div",{staticClass:"flex"},[a("div",{staticClass:"flex_hd"},[a("router-link",{attrs:{to:"/user/"+e.author.loginname}},[a("img",{staticClass:"img_author",attrs:{src:e.author.avatar_url,title:e.author.avatar_url}})])],1),t._v(" "),a("div",{staticClass:"flex_bd "},[a("div",{staticClass:"flex flexalign"},[a("p",[a("span",{staticClass:"floor"},[t._v("#"+t._s(n+1))]),t._v("\n\t\t\t\t\t\t\t\t"+t._s(e.author.loginname)+"\n\t\t\t\t\t\t\t\t"),e.author.loginname==t.detaildata.author.loginname?a("span",{staticClass:"tag tag-lou"},[t._v("作者")]):t._e()]),t._v(" "),a("span",[t._v("回复时间："+t._s(t.getTime(e.create_at)))])])]),t._v(" "),a("div",{staticClass:"flex_ft"},[a("span",{staticClass:"zan",class:{active:e.is_uped},on:{click:function(a){return t.zanfn(e)}}},[a("i",{staticClass:"font-icon icon-thumbs-up",class:{"icon-thumbs-up-alt":e.is_uped}}),t._v("\n\t\t\t\t\t\t\t"+t._s(e.ups.length)+"\n\t\t\t\t\t\t")]),t._v(" "),a("span",{staticClass:"reply",on:{click:function(a){return t.reply(e.id,e.author.loginname)}}},[a("i",{staticClass:"font-icon icon-reply"})])])]),t._v(" "),a("div",{staticClass:"replyCon",domProps:{innerHTML:t._s(e.content)}})])}),0):t._e(),t._v(" "),0==t.detaildata.replies.length?a("div",{staticClass:"notedata"},[t._v("暂无回复")]):t._e()]),t._v(" "),a("section",{staticClass:"flex huifu"},[a("div",{staticClass:"flex_bd"},[a("div",{staticClass:"textBox"},[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.hfData.content,expression:"hfData.content",modifiers:{trim:!0}}],staticClass:"text_hf",attrs:{type:"text"},domProps:{value:t.hfData.content},on:{input:function(e){e.target.composing||t.$set(t.hfData,"content",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})])]),t._v(" "),a("div",{staticClass:"flex_ft"},[a("button",{staticClass:"btn_hf",attrs:{type:"button"},on:{click:t.huifufn}},[t._v("发送")])])])])},staticRenderFns:[]}}});